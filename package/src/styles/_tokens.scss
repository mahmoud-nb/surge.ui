@use 'sass:map';
@use './colors' as *;

// # Accessibility colors (WCAG AA compliant)
$text-primary: #111827; // Contraste 16.75:1 sur blanc
$text-secondary: #374151; // Contraste 9.25:1 sur blanc
$text-tertiary: #6b7280; // Contraste 4.69:1 sur blanc (minimum AA)

$text-primary-dark: #f9fafb; // Contraste 17.09:1 sur noir
$text-secondary-dark: #e5e7eb; // Contraste 12.63:1 sur noir
$text-tertiary-dark: #9ca3af; // Contraste 4.54:1 sur noir (minimum AA)

// # Typography
$font-size-sm: 0.875rem;
$font-size-base: 1rem;
$font-size-lg: 1.125rem;
$font-size-xl: 1.25rem;
$font-size-2xl: 1.5rem;
$font-size-3xl: 1.875rem;
$line-height-tight: 1.25;
$line-height-normal: 1.5;
$line-height-relaxed: 1.625;

// # Spacing ...................
$spacing-1: 0.25rem;
$spacing-2: 0.5rem;
$spacing-3: 0.75rem;
$spacing-4: 1rem;
$spacing-6: 1.5rem;
$spacing-8: 2rem;
$su-spacing: (
  '1': 0.25rem,
  '2': 0.5rem,
  '3': 0.75rem,
  '4': 1rem,
  '6': 1.5rem,
  '8': 2rem
) !default;

// # Radius ....................
$border-radius-none: 0;
$border-radius-sm: 0.125rem;
$border-radius-md: 0.375rem;
$border-radius-lg: 0.5rem;
$border-radius-xl: 0.75rem;
$border-radius-max: 999rem;
$su-border-radius: (
  'none': 0,
  'xs': 0.125rem,
  'sm': 0.25rem,
  'md': 0.375rem,
  'lg': 0.5rem,
  'xl': 0.75rem,
  'max': 999rem
) !default;
$su-default-border-radius: map.get($su-border-radius, 'md');

@mixin use-border-radius($base: '&') {
  @each $key, $value in $su-border-radius {
    #{$base}--radius-#{$key} {
      border-radius: $value;
    }
  }
}

// # Shadows
$shadow-sm: 0 1px 2px 0 rgb(0 0 0 / 5%);
$shadow-md: 0 4px 6px -1px rgb(0 0 0 / 10%), 0 2px 4px -2px rgb(0 0 0 / 10%);
$shadow-lg: 0 10px 15px -3px rgb(0 0 0 / 10%), 0 4px 6px -4px rgb(0 0 0 / 10%);

// # Focus styles
$focus-ring-width: 2px;
$focus-ring-offset: 2px;
$focus-ring-color: $primary-600;
$focus-ring-shadow: 0 0 0 4px rgba($primary-600, 0.2);

// Minimum touch targets (44px selon WCAG)
$min-touch-target: 2.75rem; // 44px
$min-touch-target-sm: 2rem; // 32px (acceptable pour les éléments secondaires)

// Box default style
$box-style: (
  default: (
    backgroundcolor: $gray-50,
    bordercolor: $gray-200,
    borderradius: $su-default-border-radius,
  ),
  dark: (
    backgroundcolor: $gray-800,
    bordercolor: $gray-600,
    borderradius: $su-default-border-radius,
  )
);

// =================================================================
// 1. Variables STATIQUES (Ne changent pas avec le thème)
// =================================================================
$su-font-family: (
  base: "Inter",
  mono: monospace
);
$su-radius: (
  global: 0.5rem,
  box: 0.75rem,
  field: 0.375rem,
  button: 0.75rem
);
$su-shadow: (
  default: 0 1px 3px 0 rgb(0 0 0 / 10%),
  focus: 0 0 0 3px rgb(59 130 246 / 50%)
);

// =================================================================
// 2. Thème LIGHT (Valeurs par défaut)
// =================================================================
$su-text-colors-light: (
  primary: #111827,
  secondary: #374151,
  tertiary: #6b7280
);
$su-link-colors-light: (
  default: #2563eb,
  primary: #1d4ed8,
  secondary: #374151,
  muted: #9ca3af
);
$su-background-colors-light: (
  global: #f9fafb,
  box: #fff,
  field: #fff
);
$su-border-colors-light: (
  default: #d1d5db,
  focus: #3b82f6
);
$su-state-colors-light: (
  success: #16a34a,
  error: #dc2626,
  warning: #f59e0b,
  info: #0284c7
);

// =================================================================
// 3. Thème DARK (Valeurs inversées)
// =================================================================
$su-text-colors-dark: (
  primary: #f9fafb,
  secondary: #e5e7eb,
  tertiary: #9ca3af
);
$su-link-colors-dark: (
  default: #60a5fa, // Bleu plus clair pour la lisibilité
  primary: #93c5fd,
  secondary: #e5e7eb,
  muted: #6b7280
);
$su-background-colors-dark: (
  global: #111827, // Fond sombre
  box: #1f2937, // Boîtes légèrement plus claires
  field: #374151 // Champs de formulaire
);
$su-border-colors-dark: (
  default: #4b5563, // Bordures plus claires
  focus: #60a5fa
);
$su-state-colors-dark: (
  success: #4ade80,
  error: #f87171,
  warning: #facc15,
  info: #38bdf8
);

/**
 * Mixin pour générer les variables CSS de couleur du thème.
 * Il ne génère pas les variables statiques (radius, shadow, etc.).
 */
@mixin generate-su-theme-colors(
  $text-map: $su-text-colors-light,
  $link-map: $su-link-colors-light,
  $bg-map: $su-background-colors-light,
  $border-map: $su-border-colors-light,
  $state-map: $su-state-colors-light
) {
  // 1. Générer les variables de Texte
  @each $key, $value in $text-map {
    --su-text-#{$key}-color: #{$value};
  }
  
  // 2. Générer les variables de Liens
  @each $key, $value in $link-map {
    --su-link-#{$key}-color: #{$value};
  }

  // 3. Générer les variables de Background
  @each $key, $value in $bg-map {
    --su-bg-#{$key}-color: #{$value};
  }

  // 4. Générer les variables de Bordure
  @each $key, $value in $border-map {
    --su-border-#{$key}-color: #{$value};
  }

  // 5. Générer les variables d'État
  @each $key, $value in $state-map {
    --su-state-#{$key}-color: #{$value};
  }
}

// ------------------------------------------------------------------
@mixin use-text-variants($base: '&') {
  @each $key, $value in $su-text-colors-light {
    #{$base}--#{$key} {
      color: var(--su-text-#{$key}-color);
    }
  }
}

@mixin use-state-color($base: '&', $theme: 'light') {
  $base-map: if($theme == 'dark', $su-state-colors-dark, $su-state-colors-light);
  @each $key, $value in $base-map {
    #{$base}--#{$key} {
      color: var(--su-state-success-color, $value);
    }
  }
}